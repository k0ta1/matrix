<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Console Messenger</title>
    <style>
        :root {
            --white: #ffffff;
            --blue: #00BFFF;
            --green: #00FF7F;
            --purple: #9370DB;
            --gold: #FFD700;
            --red: #FF4500;
            --matrix-green: #00ff41;
            --dark-bg: #0a0a12;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: var(--dark-bg);
            color: #e0e0e0;
            font-family: 'Courier New', monospace;
            height: 100vh;
            overflow: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 255, 65, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 255, 65, 0.05) 0%, transparent 20%);
        }
        
        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 20px;
            background: linear-gradient(90deg, #1a1a2e, #16213e);
            border-radius: 8px;
            border: 1px solid #00ff41;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-text {
            font-weight: bold;
            font-size: 1.5em;
            background: linear-gradient(90deg, #00BFFF, var(--matrix-green));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95em;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            background-color: var(--matrix-green);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--matrix-green);
        }
        
        .main-content {
            display: flex;
            flex: 1;
            gap: 20px;
            height: calc(100% - 60px);
        }
        
        .terminal-container {
            flex: 3;
            display: flex;
            flex-direction: column;
            background: rgba(20, 20, 30, 0.8);
            border-radius: 8px;
            border: 1px solid #333;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
            overflow: hidden;
        }
        
        .console-output {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            font-size: 1.1em;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: rgba(10, 10, 15, 0.9);
        }
        
        .prompt {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: rgba(15, 15, 25, 0.9);
            border-top: 1px solid #333;
        }
        
        .prompt-user {
            margin-right: 10px;
            font-weight: bold;
            white-space: nowrap;
            min-width: 160px;
        }
        
        .prompt-input {
            background: transparent;
            border: none;
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            width: 100%;
            outline: none;
            caret-color: var(--matrix-green);
        }
        
        .sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 250px;
        }
        
        .panel {
            background: rgba(20, 20, 30, 0.8);
            border-radius: 8px;
            border: 1px solid #333;
            padding: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
        }
        
        .panel-title {
            color: var(--matrix-green);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.3);
            font-size: 1.2em;
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .user-level {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(30, 30, 50, 0.5);
            border-radius: 5px;
        }
        
        .level-display {
            font-size: 1.3em;
        }
        
        .level-progress {
            flex: 1;
            height: 10px;
            background: rgba(50, 50, 70, 0.7);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .level-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00BFFF, var(--matrix-green));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .groups-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .group-item {
            padding: 10px;
            background: rgba(30, 30, 50, 0.5);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .group-item:hover {
            background: rgba(40, 40, 70, 0.7);
            border-left-color: var(--matrix-green);
        }
        
        .group-item.active {
            border-left-color: var(--matrix-green);
            background: rgba(40, 40, 70, 0.7);
        }
        
        .group-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .group-id {
            font-size: 0.9em;
            color: #aaa;
            font-family: monospace;
        }
        
        /* –°—Ç–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π */
        .message {
            line-height: 1.4;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .timestamp {
            color: #777;
            margin-right: 10px;
            font-size: 0.85em;
        }
        
        .username {
            font-weight: bold;
            margin-right: 8px;
        }
        
        .command {
            color: #00BFFF;
        }
        
        .system {
            color: #9370DB;
            font-style: italic;
        }
        
        .error {
            color: #FF4500;
            animation: blink 0.5s 3;
        }
        
        @keyframes blink {
            50% { background-color: rgba(255, 69, 0, 0.2); }
        }
        
        .level-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-left: 8px;
            vertical-align: middle;
        }
        
        .level-0 { background: #555; color: var(--white); }
        .level-1 { background: #1e3a5f; color: var(--blue); }
        .level-2 { background: #1a472a; color: var(--green); }
        .level-3 { background: #4b2c69; color: var(--purple); }
        .level-4 { background: #8b7500; color: var(--gold); }
        .level-5 { background: #8b2500; color: var(--red); }
        .level-6 { 
            background: linear-gradient(90deg, #ff0000, #ff8000, #ffff00, #80ff00, #00ffff, #0080ff, #8000ff);
            color: white;
            position: relative;
            overflow: hidden;
            animation: rainbow-flow 3s linear infinite;
            background-size: 200% 200%;
        }
        
        @keyframes rainbow-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .private-message {
            background: rgba(40, 40, 80, 0.3);
            border-left: 3px solid #00BFFF;
            padding: 12px;
            margin: 8px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .pm-indicator {
            color: #00BFFF;
            font-weight: bold;
        }
        
        .achievement {
            animation: highlight 2s;
        }
        
        @keyframes highlight {
            0% { 
                background-color: rgba(255, 215, 0, 0.5); 
                transform: scale(1.02);
            }
            100% { 
                background-color: transparent; 
                transform: scale(1);
            }
        }
        
        .user-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .user-tag {
            background: rgba(30, 30, 50, 0.7);
            padding: 6px 12px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            border: 1px solid rgba(0, 255, 65, 0.3);
        }
        
        .user-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .online { background: var(--matrix-green); box-shadow: 0 0 3px var(--matrix-green); }
        .offline { background: #FF4500; }
        .away { background: #FFD700; }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 15px;
            margin: 5px 0;
            width: fit-content;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--matrix-green);
            border-radius: 50%;
            margin: 0 3px;
            opacity: 0.6;
        }
        
        .typing-dot:nth-child(1) { animation: typing 1.2s infinite; }
        .typing-dot:nth-child(2) { animation: typing 1.2s infinite 0.2s; }
        .typing-dot:nth-child(3) { animation: typing 1.2s infinite 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
            30% { transform: translateY(-5px); opacity: 1; }
        }
        
        .group-info {
            background: rgba(20, 40, 60, 0.4);
            padding: 12px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid var(--matrix-green);
        }
        
        .channel-name {
            color: var(--matrix-green);
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .matrix-code {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 3px 8px;
            border-radius: 3px;
            color: var(--matrix-green);
        }
        
        .message-content {
            display: inline;
            overflow: hidden;
            white-space: nowrap;
            max-width: 100%;
        }
        
        .message-wrapper {
            display: flex;
            flex-direction: column;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(30, 30, 40, 0.95);
            padding: 12px 18px;
            border-radius: 8px;
            border-left: 4px solid var(--matrix-green);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
            transform: translateX(120%);
            transition: transform 0.4s ease;
            z-index: 100;
            max-width: 350px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            border-left-color: #FF4500;
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .notification-dot {
            width: 12px;
            height: 12px;
            background: var(--matrix-green);
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .notification.error .notification-dot {
            background: #FF4500;
        }
        
        .connect-form {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .connect-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 65, 0.4);
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            flex: 1;
        }
        
        .connect-button {
            background: rgba(0, 100, 0, 0.6);
            color: white;
            border: 1px solid var(--matrix-green);
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
        }
        
        .connect-button:hover {
            background: rgba(0, 150, 0, 0.7);
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.4);
        }
        
        .security-shield {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid var(--matrix-green);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }
        
        .shield-icon {
            color: var(--matrix-green);
            font-size: 20px;
            font-weight: bold;
        }
        
        .matrix-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 65, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            z-index: -1;
            opacity: 0.1;
        }
    </style>
</head>
<body>
    <div class="matrix-background"></div>
    
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-dot"></div>
            <div id="notificationText"></div>
        </div>
    </div>
    
    <div class="container" id="mainContainer">
        <div class="header">
            <div class="logo">
                <div class="logo-text">Matrix Console Messenger</div>
            </div>
            <div class="status">
                <div class="status-dot"></div>
                <div class="status-text">–ó–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ | E2E –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ | SQL/XSS –ó–∞—â–∏—Ç–∞</div>
            </div>
            <div class="security-shield">
                <div class="shield-icon">üîí</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="terminal-container">
                <div class="console-output" id="consoleOutput"></div>
                <div class="prompt">
                    <span class="prompt-user" id="promptUser">guest@matrix:~$</span>
                    <input type="text" class="prompt-input" id="commandInput" autofocus>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="panel">
                    <div class="panel-title">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div class="user-info">
                        <div class="user-level">
                            <div class="level-display" id="levelBadge">‚ö™</div>
                            <div class="level-info">
                                <div id="usernameDisplay">–ì–æ—Å—Ç—å</div>
                                <div class="level-progress">
                                    <div class="level-progress-bar" id="levelProgress"></div>
                                </div>
                            </div>
                        </div>
                        <div id="levelText">–£—Ä–æ–≤–µ–Ω—å: <strong>–ù–æ–≤–∏—á–æ–∫</strong></div>
                        <div>–°–æ–æ–±—â–µ–Ω–∏–π: <strong id="messageCount">0</strong></div>
                    </div>
                </div>
                
                <div class="panel">
                    <div class="panel-title">–ì—Ä—É–ø–ø—ã</div>
                    <div class="groups-list" id="groupsList">
                        <!-- –ì—Ä—É–ø–ø—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
                
                <div class="panel">
                    <div class="panel-title">–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</div>
                    <div class="system-commands">
                        <div class="help-item"><span class="command">/help</span> - –°–ø—Ä–∞–≤–∫–∞</div>
                        <div class="help-item"><span class="command">/clear</span> - –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</div>
                        <div class="help-item"><span class="command">/exit</span> - –í—ã—Ö–æ–¥</div>
                        <div class="help-item"><span class="command">/logout</span> - –°–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                        <div class="help-item"><span class="command">/connect</span> - –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ</div>
                        <div class="help-item"><span class="command">/users</span> - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                        <div class="help-item"><span class="command">/level</span> - –£—Ä–æ–≤–Ω–∏</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        const user = {
            username: "guest",
            messageCount: 0,
            level: 0,
            color: "#ffffff"
        };
        
        const levels = [
            {min: 0, name: "–ù–æ–≤–∏—á–æ–∫", color: "#ffffff", class: "level-0", badge: "‚ö™"},
            {min: 50, name: "–£—á–∞—Å—Ç–Ω–∏–∫", color: "#00BFFF", class: "level-1", badge: "üîµ"},
            {min: 100, name: "–ê–∫—Ç–∏–≤–Ω—ã–π", color: "#00FF7F", class: "level-2", badge: "üü¢"},
            {min: 200, name: "–í–µ—Ç–µ—Ä–∞–Ω", color: "#9370DB", class: "level-3", badge: "üü£"},
            {min: 500, name: "–≠–∫—Å–ø–µ—Ä—Ç", color: "#FFD700", class: "level-4", badge: "üü°"},
            {min: 1000, name: "–õ–µ–≥–µ–Ω–¥–∞", color: "#FF4500", class: "level-5", badge: "üî¥"},
            {min: 5000, name: "Matrix", color: "rainbow", class: "level-6", badge: "üåà"}
        ];
        
        const users = [
            {username: "neo", messageCount: 523, online: true},
            {username: "trinity", messageCount: 312, online: true},
            {username: "morpheus", messageCount: 1250, online: true},
            {username: "oracle", messageCount: 4987, online: false},
            {username: "smith", messageCount: 89, online: false},
            {username: "cypher", messageCount: 75, online: true}
        ];
        
        const groups = [
            {id: "MATRIX1", name: "–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª", description: "–û–±—â–∏–π —á–∞—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"},
            {id: "HACKERS", name: "–•–∞–∫–µ—Ä—Å–∫–∏–π –∫–ª—É–±", description: "–û–±—Å—É–∂–¥–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è"},
            {id: "AN0NYM", name: "–ê–Ω–æ–Ω–∏–º–Ω—ã–π —á–∞—Ç", description: "–ê–Ω–æ–Ω–∏–º–Ω—ã–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"},
            {id: "GAMERS", name: "–ò–≥—Ä–æ–≤–æ–π –∫–ª—É–±", description: "–û–±—Å—É–∂–¥–µ–Ω–∏–µ –∏–≥—Ä –∏ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç–∞"},
            {id: "CODEFX", name: "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏", description: "–û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π"}
        ];
        
        let currentChannel = groups[0];
        let privateMessages = [];
        let isTyping = false;
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const consoleOutput = document.getElementById('consoleOutput');
        const commandInput = document.getElementById('commandInput');
        const promptUser = document.getElementById('promptUser');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        const levelBadge = document.getElementById('levelBadge');
        const usernameDisplay = document.getElementById('usernameDisplay');
        const levelText = document.getElementById('levelText');
        const messageCount = document.getElementById('messageCount');
        const levelProgress = document.getElementById('levelProgress');
        const groupsList = document.getElementById('groupsList');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function init() {
            renderGroupsList();
            addSystemMessage("Matrix Console Messenger v2.0");
            addSystemMessage("–ó–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –°–∫–≤–æ–∑–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ.");
            addSystemMessage("–°–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: SQL/XSS –∑–∞—â–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞");
            addSystemMessage("–¢–µ–∫—É—â–∏–π –∫–∞–Ω–∞–ª: " + currentChannel.name, "channel");
            addSystemMessage("–í–≤–µ–¥–∏—Ç–µ /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥");
            addSystemMessage("------------------------------------------------------------");
            
            updateUserDisplay();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥
            commandInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    processCommand(commandInput.value);
                    commandInput.value = '';
                }
            });
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            setTimeout(simulateActivity, 5000);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
        function processCommand(cmd) {
            if (!cmd.trim()) return;
            
            addSystemMessage(`$ ${cmd}`, "command");
            
            const parts = cmd.split(' ');
            const command = parts[0].toLowerCase();
            const args = parts.slice(1);
            
            switch(command) {
                case '/login':
                    if (args.length < 1) {
                        showError("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /login [–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]");
                        return;
                    }
                    loginUser(args[0]);
                    break;
                    
                case '/msg':
                    if (args.length < 2) {
                        showError("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /msg [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] [—Å–æ–æ–±—â–µ–Ω–∏–µ]");
                        return;
                    }
                    sendPrivateMessage(args[0], args.slice(1).join(' '));
                    break;
                    
                case '/help':
                    showHelp();
                    break;
                    
                case '/users':
                    showUsers();
                    break;
                    
                case '/clear':
                    clearConsole();
                    break;
                    
                case '/level':
                    showLevelInfo();
                    break;
                    
                case '/color':
                    if (args.length < 1) {
                        showError("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /color [–Ω–æ–≤—ã–π —Ü–≤–µ—Ç –≤ HEX]");
                        addSystemMessage("–ü—Ä–∏–º–µ—Ä: /color #FF00FF");
                        return;
                    }
                    changeColor(args[0]);
                    break;
                    
                case '/post':
                    if (args.length < 1) {
                        showError("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /post [—Å–æ–æ–±—â–µ–Ω–∏–µ]");
                        return;
                    }
                    postMessage(args.join(' '));
                    break;
                    
                case '/connect':
                    if (args.length < 1) {
                        showConnectForm();
                        return;
                    }
                    connectToGroup(args[0]);
                    break;
                    
                case '/logout':
                    logoutUser();
                    break;
                    
                case '/exit':
                    showNotification("–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã... –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!");
                    setTimeout(() => {
                        addSystemMessage("–°–µ–∞–Ω—Å –∑–∞–≤–µ—Ä—à–µ–Ω. –î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
                        commandInput.disabled = true;
                    }, 1000);
                    break;
                    
                default:
                    showError(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: ${command}`);
                    addSystemMessage("–í–≤–µ–¥–∏—Ç–µ /help –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥");
            }
        }
        
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥—Ä—É–ø–ø–µ
        function connectToGroup(groupId) {
            groupId = groupId.toUpperCase();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–¥–∞
            if (!/^[A-Z0-9]{6}$/.test(groupId)) {
                showError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞ –≥—Ä—É–ø–ø—ã. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ 6 —Å–∏–º–≤–æ–ª–æ–≤ (A-Z, 0-9)");
                return;
            }
            
            // –ü–æ–∏—Å–∫ –≥—Ä—É–ø–ø—ã
            const group = groups.find(g => g.id === groupId);
            
            if (group) {
                currentChannel = group;
                addSystemMessage(`–£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –≥—Ä—É–ø–ø–µ: ${group.name}`, "success");
                addSystemMessage(`–û–ø–∏—Å–∞–Ω–∏–µ: ${group.description}`, "channel");
                showNotification(`–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –≥—Ä—É–ø–ø–µ: ${group.name}`);
                renderGroupsList();
            } else {
                showError(`–ì—Ä—É–ø–ø–∞ —Å –∫–æ–¥–æ–º ${groupId} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
            }
        }
        
        // –§–æ—Ä–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≥—Ä—É–ø–ø–µ
        function showConnectForm() {
            addSystemMessage("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥—Ä—É–ø–ø–µ. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≥—Ä—É–ø–ø—ã:");
            addSystemMessage("–î–æ—Å—Ç—É–ø–Ω—ã–µ –≥—Ä—É–ø–ø—ã:");
            
            groups.forEach(group => {
                addSystemMessage(`- <span class="matrix-code">${group.id}</span>: ${group.name}`);
            });
            
            const form = document.createElement('div');
            form.className = 'connect-form';
            form.innerHTML = `
                <input type="text" class="connect-input" id="groupCode" placeholder="–ö–æ–¥ –≥—Ä—É–ø–ø—ã (6 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="6">
                <button class="connect-button" onclick="submitGroupCode()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
            `;
            
            consoleOutput.appendChild(form);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
            setTimeout(() => {
                const groupCodeInput = document.getElementById('groupCode');
                if (groupCodeInput) groupCodeInput.focus();
            }, 100);
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≥—Ä—É–ø–ø—ã
        function submitGroupCode() {
            const groupCodeInput = document.getElementById('groupCode');
            if (groupCodeInput && groupCodeInput.value) {
                connectToGroup(groupCodeInput.value);
            }
        }
        
        // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function loginUser(username) {
            if (username.length < 3) {
                showError("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤");
                return;
            }
            
            // –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
            username = sanitizeInput(username);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
            if (detectSQLInjection(username)) {
                showError("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏! –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.");
                return;
            }
            
            user.username = username;
            // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –Ω–∞—á–∏–Ω–∞–µ–º —Å 0 —Å–æ–æ–±—â–µ–Ω–∏–π
            user.messageCount = 0;
            updateUserLevel();
            
            addSystemMessage(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${formatUsername(user)}!`);
            addSystemMessage(`–í–∞—à —É—Ä–æ–≤–µ–Ω—å: ${levels[user.level].name}`);
            updateUserDisplay();
            showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}!`);
        }
        
        // –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function logoutUser() {
            user.username = "guest";
            user.messageCount = 0;
            user.level = 0;
            addSystemMessage("–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã");
            updateUserDisplay();
            showNotification("–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã");
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–∏—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        function sendPrivateMessage(recipient, message) {
            if (user.username === "guest") {
                showError("–û—à–∏–±–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥ —Å –ø–æ–º–æ—â—å—é /login");
                return;
            }
            
            // –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
            recipient = sanitizeInput(recipient);
            message = sanitizeInput(message);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
            if (detectSQLInjection(message) || detectSQLInjection(recipient)) {
                showError("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏! –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.");
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            const pm = {
                id: Date.now(),
                from: user.username,
                to: recipient,
                message: message,
                timestamp: new Date(),
                isEncrypted: false
            };
            
            privateMessages.push(pm);
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            const pmElement = document.createElement('div');
            pmElement.className = 'private-message';
            pmElement.innerHTML = `
                <div><span class="pm-indicator">[–õ–°]</span> <strong>${formatUsername(user)}</strong> ‚Üí <strong>${recipient}</strong></div>
                <div>${message}</div>
                <div class="timestamp">${formatTime(pm.timestamp)}</div>
            `;
            
            consoleOutput.appendChild(pmElement);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
            user.messageCount++;
            updateUserLevel();
            updateUserDisplay();
        }
        
        // –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª
        function postMessage(message) {
            if (user.username === "guest") {
                showError("–û—à–∏–±–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥ —Å –ø–æ–º–æ—â—å—é /login");
                return;
            }
            
            // –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
            message = sanitizeInput(message);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
            if (detectSQLInjection(message)) {
                showError("–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏! –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.");
                return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            const messageEl = document.createElement('div');
            messageEl.className = 'message';
            messageEl.innerHTML = `
                <span class="timestamp">[${formatTime(new Date())}]</span>
                ${formatUsername(user)}: 
                <span class="message-content">${message}</span>
            `;
            
            consoleOutput.appendChild(messageEl);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
            user.messageCount++;
            updateUserLevel();
            updateUserDisplay();
        }
        
        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞
        function changeColor(color) {
            if (!/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color)) {
                showError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ü–≤–µ—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HEX-—Ñ–æ—Ä–º–∞—Ç (#RRGGBB)");
                return;
            }
            
            user.color = color;
            addSystemMessage(`–¶–≤–µ—Ç –≤–∞—à–µ–≥–æ –Ω–∏–∫–Ω–µ–π–º–∞ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ ${color}`);
            updateUserDisplay();
            showNotification(`–¶–≤–µ—Ç –Ω–∏–∫–Ω–µ–π–º–∞ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ ${color}`);
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserLevel() {
            const newLevel = calculateLevel(user.messageCount);
            
            if (newLevel > user.level) {
                user.level = newLevel;
                addSystemMessage(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è: ${levels[user.level].name}`, "achievement");
                addSystemMessage(`–¢–µ–ø–µ—Ä—å –≤–∞—à –Ω–∏–∫–Ω–µ–π–º –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è ${levels[user.level].name === "Matrix" ? "—Ä–∞–¥—É–∂–Ω—ã–º" : "—Ü–≤–µ—Ç–æ–º " + levels[user.level].color}`);
                showNotification(`–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ${levels[user.level].name}!`);
                updateUserDisplay();
            }
        }
        
        // –†–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function calculateLevel(count) {
            for (let i = levels.length - 1; i >= 0; i--) {
                if (count >= levels[i].min) {
                    return i;
                }
            }
            return 0;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ä–æ–≤–Ω—è—Ö
        function showLevelInfo() {
            addSystemMessage("–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π Matrix Messenger:");
            addSystemMessage("–¶–≤–µ—Ç –≤–∞—à–µ–≥–æ –Ω–∏–∫–Ω–µ–π–º–∞ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:");
            
            levels.forEach(level => {
                const levelEl = document.createElement('div');
                levelEl.className = 'message';
                levelEl.innerHTML = `
                    <span class="${level.class} level-badge">${level.badge} ${level.name}</span> 
                    - ${level.min}+ —Å–æ–æ–±—â–µ–Ω–∏–π
                `;
                consoleOutput.appendChild(levelEl);
            });
            
            addSystemMessage(`–í–∞—à —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: ${levels[user.level].name} (${user.messageCount} —Å–æ–æ–±—â–µ–Ω–∏–π)`);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function showUsers() {
            addSystemMessage("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–Ω–ª–∞–π–Ω:");
            
            const userListEl = document.createElement('div');
            userListEl.className = 'user-list';
            
            users.forEach(u => {
                const userLevel = calculateLevel(u.messageCount);
                const levelInfo = levels[userLevel];
                
                const userEl = document.createElement('div');
                userEl.className = 'user-tag';
                userEl.innerHTML = `
                    <div class="user-dot ${u.online ? 'online' : 'offline'}"></div>
                    <span class="${levelInfo.class}" style="font-weight:bold">${u.username}</span>
                    <span class="${levelInfo.class} level-badge">${levelInfo.badge} ${u.messageCount}</span>
                `;
                
                userListEl.appendChild(userEl);
            });
            
            consoleOutput.appendChild(userListEl);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∫–∏
        function showHelp() {
            addSystemMessage("–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:");
            
            const helpMenu = document.createElement('div');
            helpMenu.className = 'help-menu';
            
            // –ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userCommands = document.createElement('div');
            userCommands.className = 'help-category';
            userCommands.innerHTML = `
                <div class="help-title">–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</div>
                <div class="help-item"><span class="command">/login [–∏–º—è]</span> - –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</div>
                <div class="help-item"><span class="command">/post [—Ç–µ–∫—Å—Ç]</span> - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
                <div class="help-item"><span class="command">/msg [–ø–æ–ª—å–∑.] [—Ç–µ–∫—Å—Ç]</span> - –õ–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
                <div class="help-item"><span class="command">/color [HEX]</span> - –ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç –Ω–∏–∫–Ω–µ–π–º–∞</div>
                <div class="help-item"><span class="command">/connect [–∫–æ–¥]</span> - –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ</div>
            `;
            
            // –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
            const systemCommands = document.createElement('div');
            systemCommands.className = 'help-category';
            systemCommands.innerHTML = `
                <div class="help-title">–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</div>
                <div class="help-item"><span class="command">/help</span> - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É</div>
                <div class="help-item"><span class="command">/users</span> - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                <div class="help-item"><span class="command">/level</span> - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ä–æ–≤–Ω—è—Ö</div>
                <div class="help-item"><span class="command">/clear</span> - –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</div>
                <div class="help-item"><span class="command">/logout</span> - –°–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                <div class="help-item"><span class="command">/exit</span> - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</div>
            `;
            
            helpMenu.appendChild(userCommands);
            helpMenu.appendChild(systemCommands);
            consoleOutput.appendChild(helpMenu);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Å–æ–ª–∏
        function clearConsole() {
            consoleOutput.innerHTML = '';
            addSystemMessage("–ö–æ–Ω—Å–æ–ª—å –æ—á–∏—â–µ–Ω–∞");
            addSystemMessage("------------------------------------------------------------");
            showNotification("–ö–æ–Ω—Å–æ–ª—å –æ—á–∏—â–µ–Ω–∞");
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function formatUsername(userObj) {
            const levelInfo = levels[userObj.level];
            return `<span class="${levelInfo.class}" style="font-weight:bold">${userObj.username}</span>`;
        }
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        function addSystemMessage(text, className = "") {
            const messageEl = document.createElement('div');
            messageEl.className = `message system ${className}`;
            messageEl.innerHTML = `<span class="timestamp">[${formatTime(new Date())}]</span> ${text}`;
            consoleOutput.appendChild(messageEl);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        function showError(text) {
            const errorEl = document.createElement('div');
            errorEl.className = 'message system error';
            errorEl.innerHTML = `<span class="timestamp">[${formatTime(new Date())}]</span> ${text}`;
            consoleOutput.appendChild(errorEl);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(text, "error");
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserDisplay() {
            const levelInfo = levels[user.level];
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–∞ —É—Ä–æ–≤–Ω—è
            levelBadge.className = 'level-display ' + levelInfo.class;
            levelBadge.textContent = levelInfo.badge;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            usernameDisplay.innerHTML = user.username === "guest" ? "–ì–æ—Å—Ç—å" : 
                `<span class="${levelInfo.class}">${user.username}</span>`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —É—Ä–æ–≤–Ω—è
            levelText.innerHTML = `–£—Ä–æ–≤–µ–Ω—å: <strong>${levelInfo.name}</strong>`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
            messageCount.textContent = user.messageCount;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
            const nextLevel = user.level < levels.length - 1 ? levels[user.level + 1].min : levels[user.level].min * 2;
            const progress = Math.min(100, (user.messageCount - levels[user.level].min) / (nextLevel - levels[user.level].min) * 100);
            levelProgress.style.width = progress + '%';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
            if (user.username === "guest") {
                promptUser.textContent = "guest@matrix:~$";
            } else {
                promptUser.innerHTML = `<span class="${levelInfo.class}">${user.username}@matrix</span>:~$`;
            }
        }
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function formatTime(date) {
            return date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }
        
        // –ó–∞—â–∏—Ç–∞ –æ—Ç XSS - —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤–≤–æ–¥–∞
        function sanitizeInput(input) {
            return input
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }
        
        // –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
        function detectSQLInjection(input) {
            const sqlKeywords = [
                'select', 'insert', 'update', 'delete', 'drop', 'truncate', 
                'create', 'alter', 'exec', 'xp_', '--', ';', '/*', '*/', 'union'
            ];
            
            const lowerInput = input.toLowerCase();
            return sqlKeywords.some(keyword => lowerInput.includes(keyword));
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(text, type = "success") {
            notificationText.innerHTML = text;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function simulateActivity() {
            if (Math.random() > 0.3) return;
            
            const activeUsers = users.filter(u => u.online && u.username !== user.username);
            if (activeUsers.length === 0) return;
            
            const randomUser = activeUsers[Math.floor(Math.random() * activeUsers.length)];
            const messages = [
                "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ö–∞–∫ –¥–µ–ª–∞?",
                "–ö—Ç–æ-–Ω–∏–±—É–¥—å —Ä–∞–±–æ—Ç–∞–ª —Å Matrix SDK?",
                "–¢–æ–ª—å–∫–æ —á—Ç–æ –æ–±–Ω–∞—Ä—É–∂–∏–ª –∫–ª–∞—Å—Å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è",
                "–ü–æ–º–æ–≥–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Å–µ—Ä–≤–µ—Ä–∞...",
                "–°–º–æ—Ç—Ä—é –ø–æ—Å–ª–µ–¥–Ω–∏–π Matrix Reloaded, –æ—Ç–ª–∏—á–Ω—ã–π —Ñ–∏–ª—å–º!",
                "–ï—Å—Ç—å –∏–¥–µ–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞?",
                "–ù–∞—à—ë–ª –±–∞–≥ –≤ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ–±—Å—É–∂–¥–∞–µ–º?",
                "–ö–∞–∫ –≤–∞–º –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞?"
            ];
            
            const message = messages[Math.floor(Math.random() * messages.length)];
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
            simulateTyping(randomUser, message);
            
            // –°–ª–µ–¥—É—é—â–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥
            setTimeout(simulateActivity, 5000 + Math.random() * 5000);
        }
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        function simulateTyping(userObj, message) {
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span style="margin-left:10px">${userObj.username} –ø–µ—á–∞—Ç–∞–µ—Ç...</span>
            `;
            
            consoleOutput.appendChild(typingIndicator);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // –ß–µ—Ä–µ–∑ 1.5-2.5 —Å–µ–∫—É–Ω–¥—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            setTimeout(() => {
                typingIndicator.remove();
                
                const messageEl = document.createElement('div');
                messageEl.className = `message`;
                messageEl.innerHTML = `
                    <span class="timestamp">[${formatTime(new Date())}]</span>
                    ${formatUsername(userObj)}: 
                    <span class="message-content">${message}</span>
                `;
                
                consoleOutput.appendChild(messageEl);
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            }, 1500 + Math.random() * 1000);
        }
        
        // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø
        function renderGroupsList() {
            groupsList.innerHTML = '';
            
            groups.forEach(group => {
                const groupEl = document.createElement('div');
                groupEl.className = `group-item ${group.id === currentChannel.id ? 'active' : ''}`;
                groupEl.innerHTML = `
                    <div class="group-name">${group.name}</div>
                    <div class="group-id">ID: <span class="matrix-code">${group.id}</span></div>
                `;
                groupEl.addEventListener('click', () => connectToGroup(group.id));
                groupsList.appendChild(groupEl);
            });
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.onload = init;
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å UI
        window.submitGroupCode = submitGroupCode;
    </script>
</body>
</html>